---
layout: default
---

<article class="country-page">
  {% include page-header.html %}

  <div class="page-content">
    {{ content }}
  </div>

  <section class="cities-overview">
    <h2>St채dte</h2>
    
    <!-- Count cities with day entries first -->
    {% assign cities_with_content = 0 %}
    {% for city in country_data.cities %}
      {% assign city_key = city[0] %}
      {% assign day_pages = site.pages | where_exp: "p", "p.country == page.country and p.layout == 'day' and (p.city contains city_key or p.city == city_key)" %}
      {% if day_pages.size > 0 %}
        {% assign cities_with_content = cities_with_content | plus: 1 %}
      {% endif %}
    {% endfor %}
    
    {% if cities_with_content > 0 %}
      <div class="grid grid--cities">
        {% for city in country_data.cities %}
          {% assign city_key = city[0] %}
          {% assign city_data = city[1] %}
          
          <!-- Find city index page -->
          {% assign city_page = site.pages | where: "country", page.country | where: "city", city_key | where: "layout", "city" | first %}
          
          <!-- Count day entries for this city -->
          {% assign day_pages = site.pages | where_exp: "p", "p.country == page.country and p.layout == 'day' and (p.city contains city_key or p.city == city_key)" %}
          
          <!-- Only show cities that have day entries -->
          {% if day_pages.size > 0 %}
            {% include card.html type="city" item=city_page country_data=country_data city_data=city_data day_pages=day_pages %}
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div class="no-entries">
        <p>Noch keine St채dte mit Tagebucheintr채gen in {{ country_data.name }}. Die Eintr채ge erscheinen hier, sobald die Reise beginnt!</p>
      </div>
    {% endif %}
  </section>

  {% comment %} Country Image Gallery {% endcomment %}
  {% include gallery.html scope="country" country=page.country %}
</article>
