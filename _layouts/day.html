---
layout: default
---

<article class="day-entry">
  {% include page-header.html %}

  <div class="entry-content">
    {{ content }}
  </div>

  <footer class="entry-footer">
    <nav class="day-navigation">
      {% assign country_pages = site.pages | where: "country", page.country | where: "city", page.city %}
      {% assign day_pages = country_pages | where: "layout", "day" | sort: "day" %}
      
      {% for day_page in day_pages %}
        {% if day_page.day == page.day %}
          {% assign current_index = forloop.index0 %}
          {% break %}
        {% endif %}
      {% endfor %}
      
      {% if current_index > 0 %}
        {% assign prev_index = current_index | minus: 1 %}
        {% assign prev_page = day_pages[prev_index] %}
        <a href="{{ prev_page.url | relative_url }}" class="nav-prev">
          ← Tag {{ prev_page.day }}
        </a>
      {% endif %}
      
      {% assign next_index = current_index | plus: 1 %}
      {% if day_pages[next_index] %}
        {% assign next_page = day_pages[next_index] %}
        <a href="{{ next_page.url | relative_url }}" class="nav-next">
          Tag {{ next_page.day }} →
        </a>
      {% elsif site.enable_next_city_navigation %}
        {% comment %} Check for next city if no next day in current city {% endcomment %}
        {% assign country_data = site.data.countries[page.country] %}
        {% assign cities_array = country_data.cities | map: "first" %}
        {% assign current_city_index = -1 %}
        
        {% for city_key in cities_array %}
          {% if city_key == page.city %}
            {% assign current_city_index = forloop.index0 %}
            {% break %}
          {% endif %}
        {% endfor %}
        
        {% if current_city_index >= 0 %}
          {% assign next_city_index = current_city_index | plus: 1 %}
          {% if cities_array[next_city_index] %}
            {% assign next_city_key = cities_array[next_city_index] %}
            {% assign next_city_data = country_data.cities[next_city_key] %}
            
            {% comment %} Find first day of next city {% endcomment %}
            {% assign all_country_pages = site.pages | where: "country", page.country %}
            {% assign next_city_pages = all_country_pages | where: "city", next_city_key %}
            {% assign next_city_day_pages = next_city_pages | where: "layout", "day" | sort: "day" %}
            
            {% if next_city_day_pages.size > 0 %}
              {% assign first_next_city_day = next_city_day_pages.first %}
              <a href="{{ first_next_city_day.url | relative_url }}" class="nav-next nav-next-city">
                {{ next_city_data.emoji }} {{ next_city_data.name }} →
              </a>
            {% endif %}
          {% endif %}
        {% endif %}
      {% endif %}
    </nav>
  </footer>
</article>
